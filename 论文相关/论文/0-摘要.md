摘要

编译器能将以某种语言写的程序转换为等价的目标语言写成的程序。编译器是计算机科学中理论与实践相结合的最好典范，通过编写编译器，不仅能更好地掌握编程语言本身，还能锻炼组织大量代码的能力、以及系统设计的能力。

编译器通常由一系列阶段组成：词法分析、语法分析、语义分析、代码生成。通过对编译器进行阶段划分，可以重用它的各个阶段，每个阶段都可以采用不同的方法而不必改写其他阶段的内容，还可以让整体结构更加清晰，易于编写和维护。编译器有多趟式编译器和单趟式编译器之分，多趟式编译器通常实现为多个相对独立的阶段，每个阶段都将对源代码进行扫描，生成的目标代码更加高效，但是实现过程更加复杂。单趟式编译器则将编译的四个阶段组合成一遍，只对源代码扫描一次，就完成了编译过程，实现过程更加简单，但是生成的代码没有多趟式编译器生成的代码高效。本文的目的是实现一个能够正确将源代码翻译成目标代码的编译器，因此主要内容集中在编译器前端部分，不生成中间代码，也不进行代码优化，直接生成目标虚拟机指令，采用单趟式实现。

主要的内容总结如下：
（1）定义C语言子集的文法，定义一个实现变量定义、函数定义、各种语句支持的C语言子集。并设计一个虚拟机，其指令作为目标代码，编译器将源代码翻译成虚拟机指令，并启动虚拟机实现目标代码的运行。
（2）采用硬编码方式实现词法分析程序，根据每个单词可能的符号组成，在词法分析程序中直接判断符号，完成词法单元的截取，为后续阶段提供词法单元。
（3）将语法分析、语义分析及代码生成融合在一起进行的程序，语法分析采用自顶向下的LL(1)方法进行语句的解析，语义分析则是简单的检查类型匹配，代码生成部分，则参考《编译原理》中各种语句的代码生成方法直接生成虚拟机指令。

关键字：编译器，虚拟机，单趟式编译
